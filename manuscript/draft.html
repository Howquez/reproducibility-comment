<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hauke Roggenkamp ">
<meta name="author" content="Susanne Adler ">
<meta name="author" content="Michael V. Reiss ">
<meta name="author" content="Stefan Feuerriegel ">
<meta name="author" content="Nicolas Pröllochs ">
<meta name="author" content="Claire Robertson ">
<meta name="author" content="Felix Holzmeister ">
<meta name="dcterms.date" content="2025-07-03">

<title>Prioritizing computational reproducibility in behavioral science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="draft_files/libs/clipboard/clipboard.min.js"></script>
<script src="draft_files/libs/quarto-html/quarto.js"></script>
<script src="draft_files/libs/quarto-html/popper.min.js"></script>
<script src="draft_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="draft_files/libs/quarto-html/anchor.min.js"></script>
<link href="draft_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="draft_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="draft_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="draft_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="draft_files/libs/bootstrap/bootstrap-973236bd072d72a04ee9cd82dcc9cb29.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Prioritizing computational reproducibility in behavioral science</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Hauke Roggenkamp <a href="https://orcid.org/0009-0005-5176-4718"><img src="../misc/orcid.png" class="img-fluid" style="width:1.8%"></a> </p>
             <p>Susanne Adler <a href="https://orcid.org/0000-0002-3211-6871"><img src="../misc/orcid.png" class="img-fluid" style="width:1.8%"></a> </p>
             <p>Michael V. Reiss <a href="https://orcid.org/0000-0002-6094-9985"><img src="../misc/orcid.png" class="img-fluid" style="width:1.8%"></a> </p>
             <p>Stefan Feuerriegel <a href="https://orcid.org/0000-0001-7856-8729"><img src="../misc/orcid.png" class="img-fluid" style="width:1.8%"></a> </p>
             <p>Nicolas Pröllochs <a href="https://orcid.org/0000-0002-1835-7302"><img src="../misc/orcid.png" class="img-fluid" style="width:1.8%"></a> </p>
             <p>Claire Robertson <a href="https://orcid.org/0000-0001-8403-6358"><img src="../misc/orcid.png" class="img-fluid" style="width:1.8%"></a> </p>
             <p>Felix Holzmeister <a href="https://orcid.org/0000-0001-9606-0427"><img src="../misc/orcid.png" class="img-fluid" style="width:1.8%"></a> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 3, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p> behavioral sciences have demonstrated remarkable progress in response to credibility challenges over the past decade <span class="citation" data-cites="OpenScienceCollaboration_2015 CamererEtAl_2016 CamererEtAl_2018 KleinEtAl_2018">(<a href="#ref-OpenScienceCollaboration_2015" role="doc-biblioref">Open Science Collaboration 2015</a>; <a href="#ref-CamererEtAl_2016" role="doc-biblioref">Camerer et al. 2016</a>, <a href="#ref-CamererEtAl_2018" role="doc-biblioref">2018</a>; <a href="#ref-KleinEtAl_2018" role="doc-biblioref">Klein et al. 2018</a>)</span>. Specifically, the open science movement, pre-registration, and crowd-sourced science have transformed research practices and strengthened methodological rigor. One of these crowd-sourced collaborations is featured in this issue and reports that x percent of published findings replicate/are reproducible etc. (see the I4Rs meta-paper).</p>
<p>Whereas replicability describes the ability to obtain consistent results using new data, <em>reproducibility</em> is a more fundamental criterion that comes in two complementary forms <span class="citation" data-cites="DreberJohannesson_2024">(<a href="#ref-DreberJohannesson_2024" role="doc-biblioref">Dreber and Johannesson 2025</a>)</span>. Computational reproducibility describes the extent to which one can recreate numerically identical results using the same data and code as the original authors. As such, it verifies the mapping between data, code, and reported results. Recreate reproducibility ignores the original authors’ code and describes the extent to which one can recreate numerically identical results using the same data and only the published methodological descriptions. As such, it verifies the mapping between reported methods and reported results, catching gaps in methodological reporting or coding errors that computational reproducibility may miss.</p>
<p>More fundamentally, the critical standard is whether not whether the results but the <em>conclusions and claims</em> remain consistent. Rather than adopting a dichotomous pass/fail approach (analogous to the widely applied binary treatment of statistical significance) we advocate for viewing reproducibility as existing on a spectrum. This includes assessing the degree of preservation across: (1) the statistical significance and direction of primary results, (2) the substantive magnitude of estimated effects, and (3) the overall interpretation and policy implications.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>As behavioral science continues addressing broader credibility challenges, ensuring a mapping of methods, code and results represents a fundamental step toward transparent, integrative research. Accordingly, these two types reproducibility should be a minimal requirement during the peer review process, which must evaluate not only the appropriateness of the methods, but also verify that the code implements these methods accurately and that they produce the reported results. Yet, when put to the test, more than half of 2,091 replication packages retrieved from the Harvard Dataverse repository fail to execute <span class="citation" data-cites="TrisovicEtAl_2022">(<a href="#ref-TrisovicEtAl_2022" role="doc-biblioref">Trisovic et al. 2022</a>)</span>. [Consider other sources of <em>real</em> reproducibility issues here.]</p>
<p>Why, despite its importance, do so many projects fail to achieve reproducibility? The challenge likely stems from both technical barriers and researcher priorities. On the technical side, rapidly evolving software environments, complex dependency chains, and inconsistent standards create indeed some obstacles <span class="citation" data-cites="Epskamp_2019">(<a href="#ref-Epskamp_2019" role="doc-biblioref">Epskamp 2019</a>)</span>. However, these technical challenges are compounded when researchers hesitate to invest in reproducible workflows due to perceived time constraints, assumptions about limited reuse value, or concerns about required technical expertise. These reservations, while understandable, reflect misperceptions about both the effort required and the benefits gained. While the time investment is frontloaded, adopting a reproducible workflow right from the outset of a project can actually increase efficiency, reduce errors, and, ultimately, save time. Moreover, the primary beneficiary of reproducible code is often the researcher themselves, when revisiting analyses months or even years later. For this reason, we suggest a mindset <span class="citation" data-cites="Vilhuber_2021">Vilhuber (<a href="#ref-Vilhuber_2021" role="doc-biblioref">2021</a>)</span> coins “computational empathy”. This concept encourages researchers to structure their work as if handing it to someone with their background but no project-specific knowledge, or more pragmatically, to their future self who will inevitably forget project details during the review process.</p>
<p>Building on this idea, we propose a phase-based framework that translates computational empathy into concrete actions to increase reproducibility. Our approach distinguishes between minimal standards, that should be achievable by all researchers regardless of technical background, and best practices for those with more advanced skills. This structure is intended to acknowledge varying technical skills (or time constraints) while ensuring basic reproducibility remains accessible.</p>
<!-- In Table 1, we summarize tiered recommendations based on different levels of time availability and technical skill. Specifically, we propose a "computational empathy" mindset—designing research materials with future users in mind. -->
<!-- First, comprehensive documentation is essential. This begins with informative README files that explain your project's purpose, structure, and execution steps. Use clear, descriptive, and consistent file and variable names that provide sufficient context without becoming ambiguous or overly long. Documentation should anticipate questions a future user might have: What does each script do? In what order should files be executed? What do variable names represent? Well-documented projects reduce the cognitive burden for future users, including your future self. -->
<!-- Second, adopt literate programming approaches that naturally facilitate documentation by interweaving code, explanation, and results. Tools like Quarto serve dual purposes: they can produce standalone analysis documents that clarify analytical choices, or they can generate entire manuscripts as self-contained documents, incorporating narrative text, code, data manipulations, figures, tables, and references. While collaboration in Quarto may be less intuitive than in Overleaf or Microsoft Word, solutions exist through version control systems or collaborative editing platforms. Many journals now provide dedicated templates for these formats, allowing seamless integration of analysis and reporting while creating a transparent record of the entire research process. -->
<!-- Third, establish structured organization principles. Maintain a clear directory structure with separate subdirectories for data, code, and outputs. This partitioning not only enhances navigability but also supports proper data management. Never modify raw data files directly; instead, document all transformations in your code to maintain an auditable trail from raw data to final results. Consistent organization creates intuitive projects that others can quickly understand and navigate. -->
<!-- Fourth, implement environment management strategies. Dependency management tools like groundhog [@SimonsohnGruson_2024], which allows version-specific package loading, or renv [@renv], which captures the complete R environment, effectively preserve computational environments. For more comprehensive solutions, containerization approaches like Binder [@binder] or Docker enable complete environment reproduction. These tools address one of the most common barriers to reproducibility: ensuring that code runs consistently despite evolving software landscapes. -->
<!-- Technical challenges are real but surmountable; the more significant barriers are often perceptual and motivational. The path forward begins with small, practical steps that individual researchers can take today, supported data editors of journals that increasingly demand CR. By creating and documenting our data and code with future users in mind, we can make our contributions more credible, transparent, and cumulative. -->
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 16%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Requirement</th>
<th>When</th>
<th>Specific Actions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AVAILABILITY</td>
<td>Before starting</td>
<td>• Create project repository with standard structure (code/, data/, output/, docs/)</td>
</tr>
<tr class="even">
<td></td>
<td>• Set up version control (git init) and link to GitHub/GitLab</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>• Choose data repository (Zenodo/OSF/Dataverse) and reserve DOI</td>
<td></td>
</tr>
<tr class="even">
<td>While working</td>
<td>• Commit code changes daily with descriptive messages</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>• Use git-lfs or external storage for large data files (&gt;100MB)</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>• Save raw data separately from processed data</td>
<td></td>
</tr>
<tr class="odd">
<td>Before submission</td>
<td>• Upload complete dataset with documentation to repository</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>• Ensure all code files are tracked in version control</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>• Test that repository contains everything needed to reproduce</td>
<td></td>
</tr>
</tbody>
</table>
<p>TRACEABILITY | Before starting | • Create README template with sections for: requirements, file structure, execution order | | • Decide on naming conventions for files and variables | While working | • Number scripts in execution order (01_clean_data.R, 02_analysis.R) | | • Document each analysis decision as you make it | | • Create a master script that runs entire pipeline | Before submission | • Write step-by-step execution instructions in README | | • Create flowchart showing data/code dependencies | | • Include expected runtime and output descriptions</p>
<p>EXPLAINABILITY | Before starting | • Choose literate programming tool (Jupyter, R Markdown, Quarto) | | • Set up computational notebook for main analyses | While working | • Write explanatory text before each code chunk | | • Avoid all manual data manipulation (no Excel edits) | | • Include sanity checks and assertions in code | Before submission | • Add comments explaining non-obvious code logic | | • Document any deviations from pre-registration | | • Include interpretation of key results in notebook</p>
<p>CONTAINERIZATION | Before starting | • Create requirements.txt/renv.lock file | | • Document operating system and software versions | | • Use relative paths exclusively (./data not C:/Users/…) | While working | • Update dependency list when adding packages | | • Test code regularly in fresh environment | | • Avoid system-specific commands or paths | Before submission | • Create Docker container or virtual environment | | • Test entire pipeline on different operating system | | • Include installation instructions for all dependencies</p>
<section id="references" class="level1">
<h1>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-AuerEtAl_2024" class="csl-entry" role="listitem">
Auer, Tobias, Maria Ulasik, and Felix Holzmeister. 2024. <span>“A Comment on "Motivated Errors" by Exley and Kessler (2024).”</span> I4R Discussion Paper Series 161. The Institute for Replication (I4R). <a href="https://ideas.repec.org/p/zbw/i4rdps/161.html">https://ideas.repec.org/p/zbw/i4rdps/161.html</a>.
</div>
<div id="ref-BrodeurEtAl_2024" class="csl-entry" role="listitem">
Brodeur, Abel, Anna Dreber, Fernando Hoces de la Guardia, and Edward Miguel. 2024. <span>“Reproduction and Replication at Scale.”</span> Correspondence. <em>Nature Human Behaviour</em> 8 (January): 2–3. <a href="https://doi.org/10.1038/s41562-023-01807-2">https://doi.org/10.1038/s41562-023-01807-2</a>.
</div>
<div id="ref-CamererEtAl_2016" class="csl-entry" role="listitem">
Camerer, Colin F., Anna Dreber, Eskil Forsell, Teck-Hua Ho, Jürgen Huber, Magnus Johannesson, Michael Kirchler, et al. 2016. <span>“Evaluating Replicability of Laboratory Experiments in Economics.”</span> <em>Science</em> 351 (6280): 1433–36. <a href="https://doi.org/10.1126/science.aaf0918">https://doi.org/10.1126/science.aaf0918</a>.
</div>
<div id="ref-CamererEtAl_2018" class="csl-entry" role="listitem">
Camerer, Colin F., Anna Dreber, Felix Holzmeister, Teck-Hua Ho, Jürgen Huber, Magnus Johannesson, Michael Kirchler, et al. 2018. <span>“Evaluating the Replicability of Social Science Experiments in <span>Nature</span> and <span>Science</span> Between 2010 and 2015.”</span> Letter. <em>Nature Human Behaviour</em> 2 (August): 637–44. <a href="https://doi.org/10.1038/s41562-018-0399-z">https://doi.org/10.1038/s41562-018-0399-z</a>.
</div>
<div id="ref-DeerAdlerDattaEtAl_2025" class="csl-entry" role="listitem">
Deer, Lachlan, Susanne J. Adler, Hannes Datta, Natalie Mizik, and Marko Sarstedt. 2025. <span>“Toward Open Science in Marketing Research.”</span> <em>International Journal of Research in Marketing</em> 42 (1): 212–33. <a href="https://doi.org/10.1016/j.ijresmar.2024.12.005">https://doi.org/10.1016/j.ijresmar.2024.12.005</a>.
</div>
<div id="ref-DreberJohannesson_2024" class="csl-entry" role="listitem">
Dreber, Anna, and Magnus Johannesson. 2025. <span>“A Framework for Evaluating Reproducibility and Replicability in Economics.”</span> <em>Economic Inquiry</em> 63 (2): 338–56. https://doi.org/<a href="https://doi.org/10.1111/ecin.13244">https://doi.org/10.1111/ecin.13244</a>.
</div>
<div id="ref-Epskamp_2019" class="csl-entry" role="listitem">
Epskamp, Sacha. 2019. <span>“Reproducibility and Replicability in a Fast-Paced Methodological World.”</span> <em>Advances in Methods and Practices in Psychological Science</em> 2 (2): 145–55. <a href="https://doi.org/10.1177/2515245919847421">https://doi.org/10.1177/2515245919847421</a>.
</div>
<div id="ref-KleinEtAl_2018" class="csl-entry" role="listitem">
Klein, Richard A., Michelangelo Vianello, Fred Hasselman, Byron G. Adams, Reginald B. AdamsJr., Sinan Alper, Mark Aveyard, et al. 2018. <span>“Many Labs 2: Investigating Variation in Replicability Across Samples and Settings.”</span> <em>Advances in Methods and Practices in Psychological Science</em> 1 (4): 443–90. <a href="https://doi.org/10.1177/2515245918810225">https://doi.org/10.1177/2515245918810225</a>.
</div>
<div id="ref-Knuth_1984" class="csl-entry" role="listitem">
Knuth, D. E. 1984. <span>“Literate Programming.”</span> <em>The Computer Journal</em> 27 (2): 97–111. <a href="https://doi.org/10.1093/comjnl/27.2.97">https://doi.org/10.1093/comjnl/27.2.97</a>.
</div>
<div id="ref-LeBelEtAl_2018" class="csl-entry" role="listitem">
LeBel, Etienne P., Randy J. McCarthy, Brian D. Earp, Malte Elson, and Wolf Vanpaemel. 2018. <span>“A Unified Framework to Quantify the Credibility of Scientific Findings.”</span> <em>Advances in Methods and Practices in Psychological Science</em> 1 (3): 389–402. <a href="https://doi.org/10.1177/2515245918787489">https://doi.org/10.1177/2515245918787489</a>.
</div>
<div id="ref-OpenScienceCollaboration_2015" class="csl-entry" role="listitem">
Open Science Collaboration. 2015. <span>“Estimating the Reproducibility of Psychological Science.”</span> <em>Science</em> 349 (6251): aac4716. <a href="https://doi.org/10.1126/science.aac4716">https://doi.org/10.1126/science.aac4716</a>.
</div>
<div id="ref-ParsonsEtAl_2022" class="csl-entry" role="listitem">
Parsons, Sam, Flávio Azevedo, Mahmoud M. Elsherif, Samuel Guay, Owen N. Shahim, Gisela H. Govaart, Emma Norris, et al. 2022. <span>“A Community-Sourced Glossary of Open Scholarship Terms.”</span> Comment. <em>Nature Human Behaviour</em> 6: 312–18. <a href="https://doi.org/10.1038/s41562-021-01269-4">https://doi.org/10.1038/s41562-021-01269-4</a>.
</div>
<div id="ref-binder" class="csl-entry" role="listitem">
Project Jupyter, Matthias Bussonnier, Jessica Forde, Jeremy Freeman, Brian Granger, Tim Head, Chris Holdgraf, et al. 2018. <span>“<span>B</span>inder 2.0 - <span>R</span>eproducible, Interactive, Sharable Environments for Science at Scale.”</span> In <em><span>P</span>roceedings of the 17th <span>P</span>ython in <span>S</span>cience <span>C</span>onference</em>, edited by Fatih Akici, David Lippa, Dillon Niederhut, and M Pacer, 113–20. <a href="https://doi.org/ 10.25080/Majora-4af1f417-011 ">https://doi.org/ 10.25080/Majora-4af1f417-011 </a>.
</div>
<div id="ref-promoting2024" class="csl-entry" role="listitem">
<span>“Promoting Reproduction and Replication at Scale.”</span> 2024. <em>Nature Human Behaviour</em> 8 (1). <a href="https://doi.org/10.1038/s41562-024-01818-7">https://doi.org/10.1038/s41562-024-01818-7</a>.
</div>
<div id="ref-ReissRoggenkamp_2025" class="csl-entry" role="listitem">
Reiss, Michael V., and Hauke Roggenkamp. 2025. <span>“A Comment on "Negativity Drives Online News Consumption".”</span> I4R Discussion Paper Series 199. Institute for Replication (I4R). <a href="https://hdl.handle.net/10419/311304">https://hdl.handle.net/10419/311304</a>.
</div>
<div id="ref-RobertsonEtAl_2023" class="csl-entry" role="listitem">
Robertson, Claire E., Nicolas Pröllochs, Kaoru Schwarzenegger, Philip Pärnamets, Jay J. Van Bavel, and Stefan Feuerriegel. 2023. <span>“Negativity Drives Online News Consumption.”</span> <em>Nature Human Behaviour</em> 7: 812–22. <a href="https://doi.org/10.1038/s41562-023-01538-4">https://doi.org/10.1038/s41562-023-01538-4</a>.
</div>
<div id="ref-SimonsohnGruson_2024" class="csl-entry" role="listitem">
Simonsohn, Uri, and Hugo Gruson. 2024. <em>Groundhog: Version-Control for CRAN, GitHub, and GitLab Packages</em>. <a href="https://CRAN.R-project.org/package=groundhog">https://CRAN.R-project.org/package=groundhog</a>.
</div>
<div id="ref-TrisovicEtAl_2022" class="csl-entry" role="listitem">
Trisovic, Ana, Matthew K. Lau, Thomas Pasquier, and Mercè Crosas. 2022. <span>“A Large-Scale Study on Research Code Quality and Execution.”</span> Analysis. <em>Scientific Data</em> 9 (60). <a href="https://doi.org/10.1038/s41597-022-01143-6">https://doi.org/10.1038/s41597-022-01143-6</a>.
</div>
<div id="ref-renv" class="csl-entry" role="listitem">
Ushey, Kevin, and Hadley Wickham. 2025. <em>Renv: Project Environments</em>. <a href="https://CRAN.R-project.org/package=renv">https://CRAN.R-project.org/package=renv</a>.
</div>
<div id="ref-Vilhuber_2021" class="csl-entry" role="listitem">
Vilhuber, Lars. 2021. <span>“Fireside Chat with AEA Data Editor: Demystifying Reproducibility.”</span> Zenodo. <a href="https://doi.org/10.5281/zenodo.4450855">https://doi.org/10.5281/zenodo.4450855</a>.
</div>
<div id="ref-VilhuberEtAl_2022" class="csl-entry" role="listitem">
Vilhuber, Lars, Marie Connolly, Miklós Koren, Joan Llull, and Peter Morrow. 2022. <span>“A Template README for Social Science Replication Packages.”</span> Technical note. Social Science Data Editors. <a href="https://doi.org/10.5281/zenodo.7293838">https://doi.org/10.5281/zenodo.7293838</a>.
</div>
</div>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>When numerical discrepancies do arise, we recommend applying a principle of in <em>dubio pro reo</em>: giving authors the benefit of the doubt and engage in respectful dialogue with original authors to clarify methodological details before concluding that reproduction has failed.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>